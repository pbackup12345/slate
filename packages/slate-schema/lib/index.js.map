{"version":3,"file":"index.js","sources":["../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../../node_modules/@babel/runtime/helpers/createClass.js","../../../node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/superPropBase.js","../../../node_modules/@babel/runtime/helpers/get.js","../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/inherits.js","../src/checkers.ts","../src/plugin.ts"],"sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","import {\r\n  NodeEntry,\r\n  Node,\r\n  Text,\r\n  Mark,\r\n  Editor,\r\n  MarkEntry,\r\n  AnnotationEntry,\r\n  AncestorEntry,\r\n  Descendant,\r\n} from 'slate'\r\n\r\nimport { AnnotationError, MarkError, NodeError } from './errors'\r\nimport { NodeRule, AnnotationRule, MarkRule, ChildValidation } from './rules'\r\n\r\n/**\r\n * Check an annotation object.\r\n */\r\n\r\nexport const checkAnnotation = (\r\n  editor: Editor,\r\n  entry: AnnotationEntry,\r\n  rule: AnnotationRule\r\n): AnnotationError | undefined => {\r\n  const { validate: v } = rule\r\n  const [annotation, key] = entry\r\n\r\n  if ('properties' in v) {\r\n    for (const k in v.properties) {\r\n      const fn = v.properties[k]\r\n      const value = annotation[k]\r\n\r\n      if (!fn(value)) {\r\n        return {\r\n          code: 'annotation_property_invalid',\r\n          annotation,\r\n          key,\r\n          property: k,\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Check a mark object.\r\n */\r\n\r\nexport const checkMark = (\r\n  editor: Editor,\r\n  entry: MarkEntry,\r\n  rule: MarkRule\r\n): MarkError | undefined => {\r\n  const { validate: v } = rule\r\n  const [mark, index, node, path] = entry\r\n\r\n  if ('properties' in v) {\r\n    for (const k in v.properties) {\r\n      const p = v.properties[k]\r\n      const value = mark[k]\r\n\r\n      if ((typeof p === 'function' && !p(value)) || p !== value) {\r\n        return {\r\n          code: 'mark_property_invalid',\r\n          mark,\r\n          index,\r\n          node,\r\n          path,\r\n          property: k,\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Check a node object.\r\n */\r\n\r\nexport const checkNode = (\r\n  editor: Editor,\r\n  entry: NodeEntry,\r\n  rule: NodeRule,\r\n  rules: NodeRule[]\r\n): NodeError | undefined => {\r\n  const { validate: v } = rule\r\n  const [node, path] = entry\r\n\r\n  if (editor.isNodeMatch(entry, rule.match)) {\r\n    if ('properties' in v) {\r\n      for (const k in v.properties) {\r\n        const p = v.properties[k]\r\n        const value = node[k]\r\n        const isInvalid = typeof p === 'function' ? !p(value) : p !== value\r\n\r\n        if (isInvalid) {\r\n          return { code: 'node_property_invalid', node, path, property: k }\r\n        }\r\n      }\r\n    }\r\n\r\n    if ('marks' in v && v.marks != null) {\r\n      for (const [mark, index, n, p] of Node.marks(node)) {\r\n        if (!v.marks.some(m => Mark.matches(mark, m))) {\r\n          return { code: 'mark_invalid', node: n, path: p, mark, index }\r\n        }\r\n      }\r\n    }\r\n\r\n    if ('text' in v && v.text != null) {\r\n      const text = Node.text(node)\r\n\r\n      if (!v.text(text)) {\r\n        return { code: 'node_text_invalid', node, path, text }\r\n      }\r\n    }\r\n\r\n    if (!Text.isText(node)) {\r\n      if ('first' in v && v.first != null && node.children.length !== 0) {\r\n        const n = Node.child(node, 0)\r\n        const p = path.concat(0)\r\n\r\n        if (!editor.isNodeMatch([n, p], v.first)) {\r\n          return { code: 'first_child_invalid', node: n, path: p, index: 0 }\r\n        }\r\n      }\r\n\r\n      if ('last' in v && v.last != null && node.children.length !== 0) {\r\n        const i = node.children.length - 1\r\n        const n = Node.child(node, i)\r\n        const p = path.concat(i)\r\n\r\n        if (!editor.isNodeMatch([n, p], v.last)) {\r\n          return { code: 'last_child_invalid', node: n, path: p, index: i }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Check an ancestor node object's children.\r\n */\r\n\r\nexport const checkAncestor = (\r\n  editor: Editor,\r\n  entry: AncestorEntry,\r\n  rule: NodeRule,\r\n  ancestorRules: NodeRule[]\r\n): NodeError | undefined => {\r\n  const { validate: v } = rule\r\n  const [parent, parentPath] = entry\r\n  const processed = new Set()\r\n  const isMatch = editor.isNodeMatch(entry, rule.match)\r\n  const groups = 'children' in v && v.children != null ? v.children : []\r\n  let index = 0\r\n  let count = 0\r\n  let g = 0\r\n\r\n  while (true) {\r\n    count++\r\n    const group = groups[g] as ChildValidation | undefined\r\n    const child = parent.children[index] as Descendant | undefined\r\n    const childPath = parentPath.concat(index)\r\n\r\n    // For each child check the parent-related validations. But ensure that we\r\n    // only ever check each child once, which isn't guaranteed since we're not\r\n    // iterating just over the children in one go.\r\n    if (child && !processed.has(child)) {\r\n      processed.add(child)\r\n\r\n      for (const r of ancestorRules) {\r\n        const e = checkParent(editor, entry, index, rule, r)\r\n\r\n        if (e) {\r\n          return e\r\n        }\r\n      }\r\n    }\r\n\r\n    // If we're out of children and groups we're done.\r\n    if (!child && !group) {\r\n      break\r\n    }\r\n\r\n    // If the entry doesn't match the rule, then the `children` validation is\r\n    // irrelevant, so just keep iterating the children.\r\n    if (!isMatch) {\r\n      if (child) {\r\n        index++\r\n        continue\r\n      } else {\r\n        break\r\n      }\r\n    }\r\n\r\n    // If we're out of groups, just continue iterating the children.\r\n    if (!group) {\r\n      index++\r\n      continue\r\n    }\r\n\r\n    // Since we want to report overflow on last matching child we don't\r\n    // immediately v for count > max, but instead do so once we find\r\n    // a child that doesn't match.\r\n    if (child && group.max != null && count > group.max) {\r\n      if (g < groups.length - 1 && (group.min == null || count >= group.min)) {\r\n        g++\r\n        count = 0\r\n        continue\r\n      } else {\r\n        return {\r\n          code: 'child_max_invalid',\r\n          node: parent,\r\n          path: parentPath,\r\n          index,\r\n          count,\r\n          max: group.max,\r\n        }\r\n      }\r\n    }\r\n\r\n    // If there's no child, we're either done, we're in an optional group, or\r\n    // we're missing a child in a group with a mininmum set.\r\n    if (!child) {\r\n      if (group.min != null && count <= group.min) {\r\n        return {\r\n          code: 'child_min_invalid',\r\n          node: parent,\r\n          path: parentPath,\r\n          index,\r\n          count,\r\n          min: group.min,\r\n        }\r\n      } else {\r\n        g++\r\n        count = 0\r\n        continue\r\n      }\r\n    }\r\n\r\n    if (editor.isNodeMatch([child, childPath], group.match || {})) {\r\n      index++\r\n      continue\r\n    }\r\n\r\n    // If there are more children definitions after this one, then this\r\n    // child might actually be valid for a future one.\r\n    if (g + 1 < groups.length) {\r\n      // If we've already satisfied the current child definition's minimum\r\n      // then we can proceed to the next definition.\r\n      if (group.min == null || count >= group.min) {\r\n        g++\r\n        count = 0\r\n        continue\r\n      }\r\n\r\n      // The current group might be missing an element, and the child is\r\n      // actually a member of the next group. If so, the next validation\r\n      // won't report errors, and we can break to error out as minimum.\r\n      const nc = groups[g + 1]\r\n\r\n      if (nc && editor.isNodeMatch([child, childPath], nc.match || {})) {\r\n        return {\r\n          code: 'child_min_invalid',\r\n          node: parent,\r\n          path: parentPath,\r\n          index,\r\n          count,\r\n          min: group.min,\r\n        }\r\n      }\r\n    }\r\n\r\n    return { code: 'child_invalid', node: child, path: childPath, index }\r\n  }\r\n}\r\n\r\n/**\r\n * Check a parent node object's children.\r\n */\r\n\r\nexport const checkParent = (\r\n  editor: Editor,\r\n  entry: AncestorEntry,\r\n  index: number,\r\n  rule: NodeRule,\r\n  childRule: NodeRule\r\n): NodeError | undefined => {\r\n  const { validate: cv } = childRule\r\n  const [parent, parentPath] = entry\r\n  const child = Node.child(parent, index)\r\n  const childPath = parentPath.concat(index)\r\n\r\n  if (\r\n    'parent' in cv &&\r\n    cv.parent != null &&\r\n    editor.isNodeMatch([child, childPath], rule.match) &&\r\n    !editor.isNodeMatch([parent, parentPath], cv.parent)\r\n  ) {\r\n    return {\r\n      code: 'parent_invalid',\r\n      node: parent,\r\n      path: parentPath,\r\n      index,\r\n    }\r\n  }\r\n\r\n  if (\r\n    'previous' in cv &&\r\n    cv.previous != null &&\r\n    index > 0 &&\r\n    editor.isNodeMatch([child, childPath], rule.match)\r\n  ) {\r\n    const prevChild = Node.child(parent, index - 1)\r\n    const prevPath = parentPath.concat(index - 1)\r\n\r\n    if (!editor.isNodeMatch([prevChild, prevPath], cv.previous)) {\r\n      return {\r\n        code: 'previous_sibling_invalid',\r\n        node: prevChild,\r\n        path: prevPath,\r\n      }\r\n    }\r\n  }\r\n\r\n  if (\r\n    'next' in cv &&\r\n    cv.next != null &&\r\n    index < parent.children.length - 1 &&\r\n    editor.isNodeMatch([child, childPath], rule.match)\r\n  ) {\r\n    const nextChild = Node.child(parent, index + 1)\r\n    const nextPath = parentPath.concat(index + 1)\r\n\r\n    if (!editor.isNodeMatch([nextChild, nextPath], cv.next)) {\r\n      return {\r\n        code: 'next_sibling_invalid',\r\n        node: nextChild,\r\n        path: nextPath,\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Editor, Path, Text } from 'slate'\r\n\r\nimport { NodeRule, SchemaRule, AnnotationRule, MarkRule } from './rules'\r\nimport { NodeError } from './errors'\r\nimport { checkNode, checkAncestor } from './checkers'\r\n\r\n/**\r\n * `SchemaEditor` is a Slate editor class with `withSchema` mixed in.\r\n */\r\n\r\nexport type SchemaEditor = InstanceType<ReturnType<typeof withSchema>>\r\n\r\n/**\r\n * The `withSchema` mixin augments an editor to ensure that its value is\r\n * normalized to always obey a schema after operations are applied.\r\n */\r\n\r\nexport const withSchema = (\r\n  Editor: new (...args: any[]) => Editor,\r\n  rules: SchemaRule[] = []\r\n) => {\r\n  const annotationRules: AnnotationRule[] = []\r\n  const markRules: MarkRule[] = []\r\n  const nodeRules: NodeRule[] = []\r\n  const ancestorRules: NodeRule[] = []\r\n\r\n  for (const rule of rules) {\r\n    if (rule.for === 'annotation') {\r\n      annotationRules.push(rule)\r\n    } else if (rule.for === 'mark') {\r\n      markRules.push(rule)\r\n    } else {\r\n      nodeRules.push(rule)\r\n\r\n      if (\r\n        'parent' in rule.validate ||\r\n        'next' in rule.validate ||\r\n        'previous' in rule.validate\r\n      ) {\r\n        ancestorRules.push(rule)\r\n      }\r\n    }\r\n  }\r\n\r\n  return class extends Editor {\r\n    /**\r\n     * Normalize a node at a path with the schema's rules, returning it to a\r\n     * valid state if it is currently invalid.\r\n     */\r\n\r\n    normalizeNodes(options: { at: Path }): void {\r\n      const { at } = options\r\n      const entry = this.getNode(at)\r\n      const [n, p] = entry\r\n      let error: NodeError | undefined\r\n      let rule: NodeRule | undefined\r\n\r\n      for (const r of nodeRules) {\r\n        let e = checkNode(this, entry, r, nodeRules)\r\n\r\n        if (!e && !Text.isText(n)) {\r\n          e = checkAncestor(this, [n, p], r, ancestorRules)\r\n        }\r\n\r\n        if (e) {\r\n          error = e\r\n          rule = r\r\n          break\r\n        }\r\n      }\r\n\r\n      if (error == null) {\r\n        return super.normalizeNodes(options)\r\n      }\r\n\r\n      const prevLength = this.operations.length\r\n\r\n      // First run the user-provided `normalize` function if one exists...\r\n      if (rule != null && rule.normalize) {\r\n        rule.normalize(this, error)\r\n      }\r\n\r\n      // If the `normalize` function did add any operations to the editor,\r\n      // we assume that it fully handled the normalization and exit.\r\n      if (this.operations.length > prevLength) {\r\n        return\r\n      }\r\n\r\n      switch (error.code) {\r\n        case 'first_child_invalid':\r\n        case 'last_child_invalid': {\r\n          const { path } = error\r\n          const [parent, parentPath] = this.getParent(path)\r\n\r\n          if (parent.children.length > 1) {\r\n            this.removeNodes({ at: path })\r\n          } else if (parentPath.length === 0) {\r\n            const range = this.getRange(parentPath)\r\n            this.removeNodes({ at: range, match: ([, p]) => p.length === 1 })\r\n          } else {\r\n            this.removeNodes({ at: parentPath })\r\n          }\r\n\r\n          break\r\n        }\r\n\r\n        case 'child_max_invalid': {\r\n          const { node, path, index } = error\r\n\r\n          if (node.children.length === 1 && path.length !== 0) {\r\n            this.removeNodes({ at: path })\r\n          } else {\r\n            this.removeNodes({ at: path.concat(index) })\r\n          }\r\n\r\n          break\r\n        }\r\n\r\n        case 'child_min_invalid': {\r\n          const { path } = error\r\n\r\n          if (path.length === 0) {\r\n            const range = this.getRange(path)\r\n            this.removeNodes({ at: range, match: ([, p]) => p.length === 1 })\r\n          } else {\r\n            this.removeNodes({ at: path })\r\n          }\r\n\r\n          break\r\n        }\r\n\r\n        case 'child_invalid':\r\n        case 'child_unexpected':\r\n        case 'next_sibling_invalid':\r\n        case 'node_property_invalid':\r\n        case 'node_text_invalid':\r\n        case 'previous_sibling_invalid': {\r\n          const { path } = error\r\n          this.removeNodes({ at: path })\r\n          break\r\n        }\r\n\r\n        case 'mark_invalid': {\r\n          const { mark, path } = error\r\n          this.removeMarks([mark], { at: path })\r\n          break\r\n        }\r\n\r\n        case 'parent_invalid': {\r\n          const { path, index } = error\r\n          const childPath = path.concat(index)\r\n          this.removeNodes({ at: childPath })\r\n          break\r\n        }\r\n\r\n        default: {\r\n          const _: never = error\r\n          throw new Error(\r\n            `Cannot normalize unknown validation error: \"${JSON.stringify(\r\n              error\r\n            )}\"`\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"names":["_typeof","checkNode","editor","entry","rule","rules","v","validate","node","path","isNodeMatch","match","k","properties","p","value","isInvalid","code","property","marks","mark","index","n","some","m","Mark","matches","Node","text","Text","isText","first","children","length","child","concat","last","i","checkAncestor","ancestorRules","parent","parentPath","processed","Set","isMatch","groups","count","g","group","childPath","has","add","r","e","checkParent","max","min","nc","childRule","cv","previous","prevChild","prevPath","next","nextChild","nextPath","withSchema","Editor","annotationRules","markRules","nodeRules","push","options","at","getNode","error","prevLength","operations","normalize","getParent","removeNodes","range","getRange","removeMarks","Error","JSON","stringify"],"mappings":"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"}
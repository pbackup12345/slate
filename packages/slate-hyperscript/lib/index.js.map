{"version":3,"file":"index.js","sources":["../../../node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/@babel/runtime/helpers/defineProperty.js","../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/inherits.js","../../../node_modules/@babel/runtime/helpers/classCallCheck.js","../src/tokens.ts","../src/creators.ts","../src/hyperscript.ts","../src/index.ts"],"sourcesContent":["function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import { Mark, Node, Path, Text } from 'slate'\r\n\r\n/**\r\n * A weak map to hold anchor tokens.\r\n */\r\n\r\nconst ANCHOR: WeakMap<Node, [number, AnchorToken]> = new WeakMap()\r\n\r\n/**\r\n * A weak map to hold focus tokens.\r\n */\r\n\r\nconst FOCUS: WeakMap<Node, [number, FocusToken]> = new WeakMap()\r\n\r\n/**\r\n * A weak map to hold annotation tokens.\r\n */\r\n\r\nconst ANNOTATION: WeakMap<Node, Record<number, AnnotationToken>> = new WeakMap()\r\n\r\n/**\r\n * All tokens inherit from a single constructor for `instanceof` checking.\r\n */\r\n\r\nexport class Token {}\r\n\r\n/**\r\n * Anchor tokens represent the selection's anchor point.\r\n */\r\n\r\nexport class AnchorToken extends Token {\r\n  focused: boolean\r\n  marks: Mark[] | null\r\n  offset?: number\r\n  path?: Path\r\n\r\n  constructor(\r\n    props: {\r\n      focused?: boolean\r\n      marks?: Mark[] | null\r\n      offset?: number\r\n      path?: Path\r\n    } = {}\r\n  ) {\r\n    super()\r\n    const { focused = true, marks = null, offset, path } = props\r\n    this.focused = focused\r\n    this.marks = marks\r\n    this.offset = offset\r\n    this.path = path\r\n  }\r\n}\r\n\r\n/**\r\n * Focus tokens represent the selection's focus point.\r\n */\r\n\r\nexport class FocusToken extends Token {\r\n  focused: boolean\r\n  marks: Mark[] | null\r\n  offset?: number\r\n  path?: Path\r\n\r\n  constructor(\r\n    props: {\r\n      focused?: boolean\r\n      marks?: Mark[] | null\r\n      offset?: number\r\n      path?: Path\r\n    } = {}\r\n  ) {\r\n    super()\r\n    const { focused = true, marks = null, offset, path } = props\r\n    this.focused = focused\r\n    this.marks = marks\r\n    this.offset = offset\r\n    this.path = path\r\n  }\r\n}\r\n\r\n/**\r\n * Annotation tokens represent an edge of an annotation range.\r\n */\r\n\r\nexport class AnnotationToken extends Token {\r\n  key: string\r\n  props: {}\r\n\r\n  constructor(props: { key: string }) {\r\n    super()\r\n    const { key, ...rest } = props\r\n    this.key = key\r\n    this.props = rest\r\n  }\r\n}\r\n\r\n/**\r\n * Add an anchor token to the end of a text node.\r\n */\r\n\r\nexport const addAnchorToken = (text: Text, token: AnchorToken) => {\r\n  const offset = text.text.length\r\n  ANCHOR.set(text, [offset, token])\r\n}\r\n\r\n/**\r\n * Get the offset if a text node has an associated anchor token.\r\n */\r\n\r\nexport const getAnchorOffset = (\r\n  text: Text\r\n): [number, AnchorToken] | undefined => {\r\n  return ANCHOR.get(text)\r\n}\r\n\r\n/**\r\n * Add a focus token to the end of a text node.\r\n */\r\n\r\nexport const addFocusToken = (text: Text, token: FocusToken) => {\r\n  const offset = text.text.length\r\n  FOCUS.set(text, [offset, token])\r\n}\r\n\r\n/**\r\n * Get the offset if a text node has an associated focus token.\r\n */\r\n\r\nexport const getFocusOffset = (\r\n  text: Text\r\n): [number, FocusToken] | undefined => {\r\n  return FOCUS.get(text)\r\n}\r\n\r\n/**\r\n * Add an annotation token to the end of a text node.\r\n */\r\n\r\nexport const addAnnotationToken = (text: Text, token: AnnotationToken) => {\r\n  let map = ANNOTATION.get(text)\r\n\r\n  if (map == null) {\r\n    map = {}\r\n    ANNOTATION.set(text, map)\r\n  }\r\n\r\n  const offset = text.text.length\r\n  map[offset] = token\r\n}\r\n\r\n/**\r\n * Get the offset if a text node has an associated focus token.\r\n */\r\n\r\nexport const getAnnotationOffsets = (\r\n  text: Text\r\n): Record<number, AnnotationToken> | undefined => {\r\n  return ANNOTATION.get(text)\r\n}\r\n","import {\r\n  Element,\r\n  Descendant,\r\n  Mark,\r\n  Node,\r\n  Path,\r\n  Range,\r\n  Text,\r\n  Value,\r\n} from 'slate'\r\nimport {\r\n  AnchorToken,\r\n  AnnotationToken,\r\n  FocusToken,\r\n  Token,\r\n  addAnchorToken,\r\n  addAnnotationToken,\r\n  addFocusToken,\r\n  getAnchorOffset,\r\n  getFocusOffset,\r\n  getAnnotationOffsets,\r\n} from './tokens'\r\n\r\n/**\r\n * Resolve the descedants of a node by normalizing the children that can be\r\n * passed into a hyperscript creator function.\r\n */\r\n\r\nconst STRINGS: WeakSet<Text> = new WeakSet()\r\n\r\nconst resolveDescendants = (children: any[]): Descendant[] => {\r\n  const nodes: Node[] = []\r\n\r\n  const addChild = (child: Node | Token): void => {\r\n    if (child == null) {\r\n      return\r\n    }\r\n\r\n    const prev = nodes[nodes.length - 1]\r\n\r\n    if (typeof child === 'string') {\r\n      const text = { text: child, marks: [] }\r\n      STRINGS.add(text)\r\n      child = text\r\n    }\r\n\r\n    if (Text.isText(child)) {\r\n      const c = child // HACK: fix typescript complaining\r\n\r\n      if (\r\n        Text.isText(prev) &&\r\n        STRINGS.has(prev) &&\r\n        STRINGS.has(c) &&\r\n        c.marks.every(m => Mark.exists(m, prev.marks)) &&\r\n        prev.marks.every(m => Mark.exists(m, c.marks))\r\n      ) {\r\n        prev.text += c.text\r\n      } else {\r\n        nodes.push(c)\r\n      }\r\n    } else if (Element.isElement(child)) {\r\n      nodes.push(child)\r\n    } else if (child instanceof Token) {\r\n      let n = nodes[nodes.length - 1]\r\n\r\n      if (!Text.isText(n)) {\r\n        addChild('')\r\n        n = nodes[nodes.length - 1] as Text\r\n      }\r\n\r\n      if (child instanceof AnchorToken) {\r\n        addAnchorToken(n, child)\r\n      } else if (child instanceof FocusToken) {\r\n        addFocusToken(n, child)\r\n      } else if (child instanceof AnnotationToken) {\r\n        addAnnotationToken(n, child)\r\n      }\r\n    } else {\r\n      throw new Error(`Unexpected hyperscript child object: ${child}`)\r\n    }\r\n  }\r\n\r\n  for (const child of children.flat(Infinity)) {\r\n    addChild(child)\r\n  }\r\n\r\n  return nodes\r\n}\r\n\r\n/**\r\n * Create an anchor token.\r\n */\r\n\r\nexport function createAnchor(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): AnchorToken {\r\n  return new AnchorToken(attributes)\r\n}\r\n\r\n/**\r\n * Create an annotation token, or two.\r\n */\r\n\r\nexport function createAnnotation(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): (Node | Token)[] {\r\n  if (!('key' in attributes)) {\r\n    throw new Error(\r\n      `The <annotation> tag must be passed a unique \\`key\\` string attribute to uniquely identify it.`\r\n    )\r\n  }\r\n\r\n  const { key, ...rest } = attributes\r\n\r\n  if (children.length === 0) {\r\n    return [new AnnotationToken({ key, ...rest })]\r\n  } else {\r\n    const array: (Node | Token)[] = resolveDescendants(children)\r\n    const start = new AnnotationToken({ key, ...rest })\r\n    const end = new AnnotationToken({ key, ...rest })\r\n    array.unshift(start)\r\n    array.push(end)\r\n    return array\r\n  }\r\n}\r\n\r\n/**\r\n * Create an anchor and a focus token.\r\n */\r\n\r\nexport function createCursor(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): Token[] {\r\n  return [new AnchorToken(attributes), new FocusToken(attributes)]\r\n}\r\n\r\n/**\r\n * Create an `Element` object.\r\n */\r\n\r\nexport function createElement(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): Element {\r\n  return { ...attributes, children: resolveDescendants(children) }\r\n}\r\n\r\n/**\r\n * Create a focus token.\r\n */\r\n\r\nexport function createFocus(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): FocusToken {\r\n  return new FocusToken(attributes)\r\n}\r\n\r\n/**\r\n * Create a fragment.\r\n */\r\n\r\nexport function createFragment(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): Descendant[] {\r\n  return resolveDescendants(children)\r\n}\r\n\r\n/**\r\n * Create a `Text` object with a mark applied.\r\n */\r\n\r\nexport function createMark(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): Text {\r\n  const mark = { ...attributes }\r\n  const nodes = resolveDescendants(children)\r\n\r\n  if (nodes.length > 1) {\r\n    throw new Error(\r\n      `The <mark> hyperscript tag must only contain a single node's worth of children.`\r\n    )\r\n  }\r\n\r\n  if (nodes.length === 0) {\r\n    return { text: '', marks: [mark] }\r\n  }\r\n\r\n  const [node] = nodes\r\n\r\n  if (!Text.isText(node)) {\r\n    throw new Error(\r\n      `The <mark> hyperscript tag must only contain text content as children.`\r\n    )\r\n  }\r\n\r\n  if (!Mark.exists(mark, node.marks)) {\r\n    node.marks.push(mark)\r\n  }\r\n\r\n  return node\r\n}\r\n\r\n/**\r\n * Create a `Selection` object.\r\n */\r\n\r\nexport function createSelection(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): Range {\r\n  const anchor: AnchorToken = children.find(c => c instanceof AnchorToken)\r\n  const focus: FocusToken = children.find(c => c instanceof FocusToken)\r\n\r\n  if (!anchor || !anchor.offset || !anchor.path) {\r\n    throw new Error(\r\n      `The <selection> hyperscript tag must have an <anchor> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\r\n    )\r\n  }\r\n\r\n  if (!focus || !focus.offset || !focus.path) {\r\n    throw new Error(\r\n      `The <selection> hyperscript tag must have a <focus> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\r\n    )\r\n  }\r\n\r\n  return {\r\n    anchor: {\r\n      offset: anchor.offset,\r\n      path: anchor.path,\r\n    },\r\n    focus: {\r\n      offset: focus.offset,\r\n      path: focus.path,\r\n    },\r\n    ...attributes,\r\n  }\r\n}\r\n\r\n/**\r\n * Create a `Text` object.\r\n */\r\n\r\nexport function createText(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n): Text {\r\n  const nodes = resolveDescendants(children)\r\n\r\n  if (nodes.length > 1) {\r\n    throw new Error(\r\n      `The <text> hyperscript tag must only contain a single node's worth of children.`\r\n    )\r\n  }\r\n\r\n  let [node] = nodes\r\n\r\n  if (node == null) {\r\n    node = { text: '', marks: [] }\r\n  }\r\n\r\n  if (!Text.isText(node)) {\r\n    throw new Error(`\r\n    The <text> hyperscript tag can only contain text content as children.`)\r\n  }\r\n\r\n  // COMPAT: Re-create the node, because if they used the <text> tag we want to\r\n  // guarantee that it won't be merge with other string children.\r\n  STRINGS.delete(node)\r\n\r\n  Object.assign(node, attributes)\r\n  return node\r\n}\r\n\r\n/**\r\n * Create a top-level `Value` object.\r\n */\r\n\r\nexport function createValue(\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  children: any[]\r\n) {\r\n  const otherChildren: any[] = []\r\n  let selectionChild: Range | undefined\r\n\r\n  for (const child of children) {\r\n    if (Range.isRange(child)) {\r\n      selectionChild = child\r\n    } else {\r\n      otherChildren.push(child)\r\n    }\r\n  }\r\n\r\n  const descendants = resolveDescendants(otherChildren)\r\n  const value: Value = {\r\n    children: descendants,\r\n    selection: null,\r\n    annotations: {},\r\n    ...attributes,\r\n  }\r\n\r\n  const selection: Partial<Range> = {}\r\n  const partials: Record<string, [Path, number, AnnotationToken]> = {}\r\n\r\n  // Search the document's texts to see if any of them have tokens associated\r\n  // that need incorporated into the selection or annotations.\r\n  for (const [node, path] of Node.texts(value)) {\r\n    const anchor = getAnchorOffset(node)\r\n    const focus = getFocusOffset(node)\r\n    const anns = getAnnotationOffsets(node)\r\n\r\n    if (anchor != null) {\r\n      const [offset] = anchor\r\n      selection.anchor = { path, offset }\r\n    }\r\n\r\n    if (focus != null) {\r\n      const [offset] = focus\r\n      selection.focus = { path, offset }\r\n    }\r\n\r\n    for (const o in anns) {\r\n      const offset = parseInt(o, 10)\r\n      const token = anns[offset]\r\n      const { key } = token\r\n      const partial = partials[key]\r\n\r\n      if (!partial) {\r\n        partials[key] = [path, offset, token]\r\n      } else {\r\n        const [pPath, pOffset, pToken] = partial\r\n        delete partials[key]\r\n\r\n        value.annotations[key] = {\r\n          anchor: { path: pPath, offset: pOffset },\r\n          focus: { path, offset },\r\n          ...pToken.props,\r\n          ...token.props,\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (Object.keys(partials).length > 0) {\r\n    throw new Error(\r\n      `Slate hyperscript must have both a start and an end defined for each <annotation> tag using the \\`key=\\` prop.`\r\n    )\r\n  }\r\n\r\n  if (selection.anchor && !selection.focus) {\r\n    throw new Error(\r\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<anchor />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\r\n    )\r\n  }\r\n\r\n  if (!selection.anchor && selection.focus) {\r\n    throw new Error(\r\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<focus />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\r\n    )\r\n  }\r\n\r\n  if (selectionChild != null) {\r\n    value.selection = selectionChild\r\n  } else if (Range.isRange(selection)) {\r\n    value.selection = selection\r\n  }\r\n\r\n  return value\r\n}\r\n","import isPlainObject from 'is-plain-object'\r\nimport { Element, Mark } from 'slate'\r\nimport { Token } from './tokens'\r\nimport {\r\n  createAnchor,\r\n  createCursor,\r\n  createAnnotation,\r\n  createElement,\r\n  createFocus,\r\n  createFragment,\r\n  createMark,\r\n  createSelection,\r\n  createText,\r\n  createValue,\r\n} from './creators'\r\n\r\n/**\r\n * The default creators for Slate objects.\r\n */\r\n\r\nconst DEFAULT_CREATORS = {\r\n  anchor: createAnchor,\r\n  annotation: createAnnotation,\r\n  cursor: createCursor,\r\n  element: createElement,\r\n  focus: createFocus,\r\n  fragment: createFragment,\r\n  mark: createMark,\r\n  selection: createSelection,\r\n  text: createText,\r\n  value: createValue,\r\n}\r\n\r\n/**\r\n * `HyperscriptCreators` are dictionaries of `HyperscriptCreator` functions\r\n * keyed by tag name.\r\n */\r\n\r\ntype HyperscriptCreators<T = any> = Record<\r\n  string,\r\n  (tagName: string, attributes: { [key: string]: any }, children: any[]) => T\r\n>\r\n\r\n/**\r\n * `HyperscriptShorthands` are dictionaries of properties applied to specific\r\n * kind of object, keyed by tag name. They allow you to easily define custom\r\n * hyperscript tags for your schema.\r\n */\r\n\r\ntype HyperscriptShorthands = Record<string, Record<string, any>>\r\n\r\n/**\r\n * Create a Slate hyperscript function with `options`.\r\n */\r\n\r\nconst createHyperscript = (\r\n  options: {\r\n    creators?: HyperscriptCreators\r\n    elements?: HyperscriptShorthands\r\n    marks?: HyperscriptShorthands\r\n    annotations?: HyperscriptShorthands\r\n  } = {}\r\n) => {\r\n  const { annotations = {}, elements = {}, marks = {} } = options\r\n  const annotationCreators = normalizeAnnotations(annotations)\r\n  const elementCreators = normalizeElements(elements)\r\n  const markCreators = normalizeMarks(marks)\r\n  const creators = {\r\n    ...DEFAULT_CREATORS,\r\n    ...annotationCreators,\r\n    ...elementCreators,\r\n    ...markCreators,\r\n    ...options.creators,\r\n  }\r\n\r\n  const jsx = createFactory(creators)\r\n  return jsx\r\n}\r\n\r\n/**\r\n * Create a Slate hyperscript function with `options`.\r\n */\r\n\r\nconst createFactory = <T extends HyperscriptCreators>(creators: T) => {\r\n  const jsx = <S extends keyof T & string>(\r\n    tagName: S,\r\n    attributes?: Object,\r\n    ...children: any[]\r\n  ): ReturnType<T[S]> => {\r\n    const creator = creators[tagName]\r\n\r\n    if (!creator) {\r\n      throw new Error(`No hyperscript creator found for tag: <${tagName}>`)\r\n    }\r\n\r\n    if (attributes == null) {\r\n      attributes = {}\r\n    }\r\n\r\n    if (!isPlainObject(attributes)) {\r\n      children = [attributes].concat(children)\r\n      attributes = {}\r\n    }\r\n\r\n    children = children.filter(child => Boolean(child)).flat()\r\n    const ret = creator(tagName, attributes, children)\r\n    return ret\r\n  }\r\n\r\n  return jsx\r\n}\r\n\r\n/**\r\n * Normalize a dictionary of element shorthands into creator functions.\r\n */\r\n\r\nconst normalizeElements = (elements: HyperscriptShorthands) => {\r\n  const creators: HyperscriptCreators<Element> = {}\r\n\r\n  for (const tagName in elements) {\r\n    const props = elements[tagName]\r\n\r\n    if (typeof props !== 'object') {\r\n      throw new Error(\r\n        `Properties specified for a hyperscript shorthand should be an object, but for the custom element <${tagName}>  tag you passed: ${props}`\r\n      )\r\n    }\r\n\r\n    creators[tagName] = (\r\n      tagName: string,\r\n      attributes: { [key: string]: any },\r\n      children: any[]\r\n    ) => {\r\n      return createElement('element', { ...props, ...attributes }, children)\r\n    }\r\n  }\r\n\r\n  return creators\r\n}\r\n\r\n/**\r\n * Normalize a dictionary of mark shorthands into creator functions.\r\n */\r\n\r\nconst normalizeMarks = (marks: HyperscriptShorthands) => {\r\n  const creators: HyperscriptCreators<Mark> = {}\r\n\r\n  for (const tagName in marks) {\r\n    const props = marks[tagName]\r\n\r\n    if (typeof props !== 'object') {\r\n      throw new Error(\r\n        `Properties specified for a hyperscript shorthand should be an object, but for the custom mark <${tagName}> tag you passed: ${props}`\r\n      )\r\n    }\r\n\r\n    creators[tagName] = (\r\n      tagName: string,\r\n      attributes: { [key: string]: any },\r\n      children: any[]\r\n    ) => {\r\n      return createMark('mark', { ...props, ...attributes }, children)\r\n    }\r\n  }\r\n\r\n  return creators\r\n}\r\n\r\n/**\r\n * Normalize a dictionary of annotation shorthands into creator functions.\r\n */\r\n\r\nconst normalizeAnnotations = (annotations: HyperscriptShorthands) => {\r\n  const creators: HyperscriptCreators<(Node | Token)[]> = {}\r\n\r\n  for (const tagName in annotations) {\r\n    const props = annotations[tagName]\r\n\r\n    if (typeof props !== 'object') {\r\n      throw new Error(\r\n        `Properties specified for a hyperscript shorthand should be an object, but for the custom annotation <${tagName}> tag you passed: ${props}`\r\n      )\r\n    }\r\n\r\n    creators[tagName] = (\r\n      tagName: string,\r\n      attributes: { [key: string]: any },\r\n      children: any[]\r\n    ) => {\r\n      return createAnnotation(\r\n        'annotation',\r\n        { ...props, ...attributes },\r\n        children\r\n      )\r\n    }\r\n  }\r\n\r\n  return creators\r\n}\r\n\r\nexport { createHyperscript, HyperscriptCreators, HyperscriptShorthands }\r\n","import {\r\n  createHyperscript,\r\n  HyperscriptCreators,\r\n  HyperscriptShorthands,\r\n} from './hyperscript'\r\n\r\n/**\r\n * The default hyperscript factory that ships with Slate, without custom tags.\r\n */\r\n\r\nconst jsx = createHyperscript()\r\n\r\nexport { jsx, createHyperscript, HyperscriptCreators, HyperscriptShorthands }\r\n"],"names":["_typeof","ANCHOR","WeakMap","FOCUS","ANNOTATION","Token","AnchorToken","props","focused","marks","offset","path","FocusToken","AnnotationToken","key","rest","addAnchorToken","text","token","length","set","getAnchorOffset","get","addFocusToken","getFocusOffset","addAnnotationToken","map","getAnnotationOffsets","STRINGS","WeakSet","resolveDescendants","children","nodes","addChild","child","prev","add","Text","isText","c","has","every","m","Mark","exists","push","Element","isElement","n","Error","flat","Infinity","createAnchor","tagName","attributes","createAnnotation","array","start","end","unshift","createCursor","createElement","createFocus","createFragment","createMark","mark","node","createSelection","anchor","find","focus","createText","Object","assign","createValue","otherChildren","selectionChild","Range","isRange","descendants","value","selection","annotations","partials","Node","texts","anns","o","parseInt","partial","pPath","pOffset","pToken","keys","DEFAULT_CREATORS","annotation","cursor","element","fragment","createHyperscript","options","elements","annotationCreators","normalizeAnnotations","elementCreators","normalizeElements","markCreators","normalizeMarks","creators","jsx","createFactory","creator","isPlainObject","concat","filter","Boolean","ret"],"mappings":"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"}